(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["punch-complete-detail"],{"0024":function(t,e,a){var i=a("b331");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("44269bc8",i,!0,{sourceMap:!1,shadowMode:!1})},"11e9":function(t,e,a){var i=a("52a7"),s=a("4630"),n=a("6821"),o=a("6a99"),r=a("69a8"),c=a("c69a"),l=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?l:function(t,e){if(t=n(t),e=o(e,!0),c)try{return l(t,e)}catch(a){}if(r(t,e))return s(!i.f.call(t,e),t[e])}},"1eae":function(t,e,a){"use strict";var i=a("3c9e"),s=a.n(i);s.a},2395:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("Header",{attrs:{title:t.taskInfo.name},on:{back:t.goBack}}),a("div",{staticClass:"app-fill-height app-scroll-y",on:{scroll:function(e){return t.slideLoad(e)}}},[a("div",{staticClass:"content"},[a("div",{staticClass:"task-detail"},[a("div",{staticClass:"task-description"},[a("span",{staticClass:"task-description-title"},[t._v("任务介绍 :")]),a("span",{staticClass:"task-description-content"},[t._v(t._s(t.taskInfo.description))])]),a("div",{staticClass:"task-description"},[a("span",{staticClass:"task-description-title"},[t._v("参加要求 :")]),a("span",{staticClass:"task-description-content"},[t._v(t._s(1===t.taskInfo.partake?"必须参加":"自愿参加"))])]),a("div",{staticClass:"task-description"},[a("span",{staticClass:"task-description-title"},[t._v("接收范围 :")]),a("span",{staticClass:"task-description-content"},[t._v(t._s(t.taskInfo.receiveRange))])]),a("div",{staticClass:"task-description"},[a("span",{staticClass:"task-description-title"},[t._v("截止时间 :")]),a("span",{staticClass:"task-description-content"},[t._v(t._s(t.taskInfo.endDate+" 23:59"))])]),this.$route.params.id||this.$route.query.state?a("v-btn",{staticClass:"join-now",attrs:{color:"info",disabled:t.isAvailable()},on:{click:t.goToJoinNew}},[t._v("去完成")]):t._e()],1),a("div",{staticClass:"complete-detail-title"},[t._v("完成情况")]),t._l(t.punchList,function(e){return a("div",{key:e.id,staticClass:"punchInfo"},[a("div",{staticClass:"content-top"},[a("div",{staticClass:"avatar-name-wrap"},[a("div",{staticClass:"user-avatar"},[e.headImgUrl?a("img",{attrs:{src:e.headImgUrl}}):a("v-icon",{staticClass:"app-z-index-20",attrs:{color:"grey lighten-2",size:"48"}},[t._v("account_circle")])],1),a("p",{staticClass:"user-name"},[t._v(t._s(e.executeUserName))])]),a("p",{staticClass:"update-time"},[t._v("\n            最新打卡 : "+t._s(e.completeTime?e.completeTime:" 暂无")+"\n          ")])]),a("div",{staticClass:"content-bottom"},[a("span",{staticClass:"undone-num"},[t._v("\n            未打卡\n            "),a("span",{staticClass:"punchNum unPunchNum"},[t._v(t._s(e.noFinishNumber))]),t._v("\n            次\n          ")]),a("span",[t._v("\n            已打卡\n            "),a("span",{staticClass:"punchNum"},[t._v(t._s(e.finishNumber))]),t._v(" 次\n          ")]),a("span",{staticClass:"expand-more",on:{click:function(a){return t.showPunchList(e,a)}}},[a("v-icon",{staticClass:"more-icon"},[t._v("expand_more")])],1)]),a("div",{staticClass:"punch-task-wrap not-show"},[a("div",{staticClass:"click-tips",staticStyle:{width:"100%"}},[t._v("\n            点击已完成可查看详情\n          ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoding,expression:"showLoding"}],staticClass:"loding-animation"},[a("v-progress-circular",{attrs:{indeterminate:"",color:"info"}})],1),t._l(t.listInfo,function(e){return a("div",{key:e.id,staticClass:"punch-task-item",on:{click:function(a){return t.goToCompleteDetail(e)}}},[a("div",{style:{color:t.showColor(e)}},[a("p",{staticClass:"iconState"},[a("font-awesome-icon",{attrs:{icon:t.showIcon(e),size:"lg"}})],1),a("p",{staticClass:"textState"},[t._v(t._s(t.showText(e)))])]),a("p",{staticClass:"punchDate"},[t._v(t._s(e.implementDate.slice(5,10)))])])})],2)])}),t.dataIsOver?a("div",{staticClass:"to-bottom"},[t._m(0)]):t._e(),a("div",{attrs:{id:"biaoji"}})],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"alert-load"},[a("div",{staticClass:"loding"},[a("v-progress-circular",{attrs:{indeterminate:"",color:"info"}}),a("div",[t._v("加载中")])],1)])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fieldset",[a("legend",[a("span",[t._v("没有更多了")])])])}],n=(a("a481"),a("ac6a"),a("c5f6"),a("2b0e")),o=a("7c4a"),r=a("69a4"),c=a("7ffd"),l=a("80b8"),p=a("3123"),d=n["a"].extend({components:{Header:o["a"]},computed:Object.assign({},Object(c["b"])(p["c"],{taskDetail:p["b"]})),data:function(){return{taskInfo:null,punchList:[],listInfo:[],pageNo:1,isOver:!0,dataIsOver:!1,show:!1,showLoding:!0}},beforeCreate:function(){},created:function(){var t=this;document.title="打卡任务";var e=this;this.$route.params.id?r["a"].getTaskInfo(Number(this.$route.params.id)).then(function(e){l["a"].store.set(p["c"]+p["b"],e.data.content),t.taskInfo=e.data.content,console.log("请求任务信息接口",t.taskInfo),t.getListInfo()}):(this.taskInfo=e.taskDetail,this.getListInfo())},methods:{getListInfo:function(){var t=this;r["a"].getPunchTaskDetailList({pageNo:this.pageNo,pageSize:12,taskId:this.taskInfo.id}).then(function(e){void 0===e.data.content?t.dataIsOver=!0:t.punchList=t.punchList.concat(e.data.content),t.show=!1}),this.pageNo++},goBack:function(){console.log("角色编号",localStorage.getItem("targetRoleCode")),"400"===localStorage.getItem("targetRoleCode")?this.$router.push("/receive-task-detail"):this.$router.push("/publish-task-detail")},isAvailable:function(){return console.log("检查",this.taskInfo.state,this.taskInfo.isOver),0!==this.taskInfo.state||0!==this.taskInfo.isOver},goToJoinNew:function(){this.$router.push({name:this.taskInfo.submitPage,query:{item:this.$route.query.item}})},showPunchList:function(t,e){var a=this;this.showLoding=!0,this.listInfo=[],r["a"].getPunchTaskList(t.id).then(function(t){console.log(t.data),a.showLoding=!1,a.listInfo=t.data.content}),console.log("当前点击元素",e.target.parentNode.parentNode.nextSibling),document.querySelectorAll(".more-icon").forEach(function(t){t.classList.remove("rotate-icon")});var i=e.target.parentNode.parentNode.nextSibling;!1===i.classList.contains("not-show")?(i.classList.add("not-show"),e.target.classList.remove("rotate-icon")):(document.querySelectorAll(".punch-task-wrap").forEach(function(t){t.classList.add("not-show")}),i.classList.remove("not-show"),e.target.classList.add("rotate-icon"))},showIcon:function(t){var e=new Date(Date.parse(t.implementDate.replace(/-/g,"/"))),a=new Date,i=e.getTime()-a.getTime();return i>0?"ban":1===t.state?"search":"ban"},showText:function(t){var e=new Date(Date.parse(t.implementDate.replace(/-/g,"/"))),a=new Date,i=e.getTime()-a.getTime();return i>0?"暂未开始":1===t.state?"已完成":"未完成"},showColor:function(t){switch(this.showText(t)){case"未完成":return"#d22";case"已完成":return"#0c6"}},goToCompleteDetail:function(t){"已完成"===this.showText(t)&&this.$router.push({name:"punch-detail-oneself",query:{id:t.id}})},slideLoad:function(t){var e=this;if(!1===this.dataIsOver){var a=document.querySelector("#biaoji").getBoundingClientRect().top;if(a<document.documentElement.clientHeight+50){if(this.show=!0,!this.isOver)return;this.isOver=!1,setTimeout(function(){e.getListInfo(),e.isOver=!0},100)}}}}}),h=d,u=(a("1eae"),a("0c7c")),f=a("6544"),v=a.n(f),g=a("8336"),m=a("132d"),b=a("490a"),x=Object(u["a"])(h,i,s,!1,null,"03891588",null);e["default"]=x.exports;v()(x,{VBtn:g["a"],VIcon:m["a"],VProgressCircular:b["a"]})},3123:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"b",function(){return s}),a.d(e,"a",function(){return n});var i="task/",s="taskDetail",n="allTeachers"},"3c9e":function(t,e,a){var i=a("71c0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("e3f4ba2c",i,!0,{sourceMap:!1,shadowMode:!1})},"5dbc":function(t,e,a){var i=a("d3f4"),s=a("8b97").set;t.exports=function(t,e,a){var n,o=e.constructor;return o!==a&&"function"==typeof o&&(n=o.prototype)!==a.prototype&&i(n)&&s&&s(t,n),t}},"69a4":function(t,e,a){"use strict";a.d(e,"a",function(){return n});var i=a("cfdf"),s=function(){function t(){this.baseUrl="",this.httpConfigService=i["a"]}var e=t.prototype;return e.getTaskTemplate=function(){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-template/select-release-list")},e.taskPublish=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task/insert",t)},e.getClassStudent=function(){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/class/select-class-by-teacher-id")},e.getGradeClass=function(){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/class/select-grade-by-school-id")},e.getClassIdAllStudent=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/student/list-by-class-id",{classId:t})},e.getPublishTaskDetail=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task/select-page-by-deploy-user-id",t)},e.getTaskJoinDetail=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-msg/user-task-page-list",t)},e.getPunchTaskList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/select-by-task-msg-id",{taskMsgId:t})},e.getPunchTaskDetailList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-msg/select-page-by-task-id",t)},e.taskSubmit=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/insert",t)},e.punchTaskSubmit=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/update",t)},e.getDailyTaskDetailsList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/select-page-by-task-id",t)},e.pushClickLike=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-like/update",{id:t})},e.getPersonalTaskDetail=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/select-by-id",{id:t})},e.getTaskCommentList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-comment/list",t)},e.AddComment=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-comment/add",t)},e.ReplyComment=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-comment-reply/add",t)},e.getVideoToken=function(){return this.httpConfigService.httpSercvice.get(this.baseUrl+"/wx/qiniu/auth")},e.getTaskInfo=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"wx/task-msg/select-by-id",{id:t})},t}(),n=new s},"71c0":function(t,e,a){e=t.exports=a("24fb")(!1),e.push([t.i,"p[data-v-03891588]{margin:0;padding:0}.wrapper[data-v-03891588]{height:100%;display:flex;flex-direction:column}.content[data-v-03891588]{flex:1}.task-detail[data-v-03891588]{border:1px solid #eee;padding:12px 16px;margin:6px;border-radius:6px}.join-now[data-v-03891588]{margin-left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.complete-detail-title[data-v-03891588]{height:40px;color:#fff;line-height:40px;font-size:16px;padding-left:16px;background:#2196f3;border-radius:4px;margin:16px 4px 10px 4px}.punchInfo[data-v-03891588]{margin:10px 4px;border:1px solid #eee;border-radius:4px;background:#fff}.content-top[data-v-03891588]{height:48px;display:flex;justify-content:space-between;margin:8px 8px 0 8px}.content-top .avatar-name-wrap[data-v-03891588]{display:flex}.content-top .user-avatar[data-v-03891588]{width:48px;height:48px;background:#ccc;border-radius:6px;overflow:hidden;margin-right:20px}.content-top .user-avatar img[data-v-03891588]{width:100%}.content-top .user-name[data-v-03891588]{margin-left:6px;height:48px;line-height:30px;font-size:16px;color:#2196f3}.content-top .update-time[data-v-03891588]{height:48px;line-height:30px;font-size:12px;color:#ccc}.content-bottom[data-v-03891588]{text-align:center;font-size:12px;position:relative;margin-left:100px;margin-bottom:10px;margin-right:6px;padding-right:20px;background:#eee;border-radius:4px}.content-bottom .undone-num[data-v-03891588]{margin-right:28px}.content-bottom .punchNum[data-v-03891588]{font-size:14px;font-weight:bolder;color:#2196f3;padding:0 6px}.content-bottom .unPunchNum[data-v-03891588]{color:#d31}.content-bottom .expand-more[data-v-03891588]{position:absolute;right:12px;top:-1px;width:24px;height:24px;z-index:10}.task-description[data-v-03891588]{display:flex;padding-bottom:16px;color:#666}.task-description-title[data-v-03891588]{color:#000;font-weight:700;width:80px}.task-description-content[data-v-03891588]{flex:1}.punch-task-wrap[data-v-03891588]{height:100%;display:flex;padding:16px 0;flex-flow:wrap;overflow-x:hidden;align-content:flex-start}.not-show[data-v-03891588]{display:none}.punch-task-item[data-v-03891588]{width:22.5%;height:22.5vw;border:1px solid #ccc;border-radius:4px;margin:1.25%;color:#bbb;position:relative}.punch-task-item p[data-v-03891588]{margin:0;padding:0;text-align:center}.iconState[data-v-03891588]{height:10vw;line-height:10vw}.punchDate[data-v-03891588]{font-size:2vw;background:hsla(0,0%,86.7%,.5);position:absolute;bottom:0;width:100%}.rotate-icon[data-v-03891588]{-webkit-transform:rotate(180deg);transform:rotate(180deg);transition:.3s}.alert-load[data-v-03891588]{width:100%;height:100%;position:absolute}.alert-load .loding[data-v-03891588]{width:80px;height:80px;padding-top:16px;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;z-index:100;color:#fff;text-align:center;border-radius:6px;background:rgba(0,0,0,.6)}.loding-animation[data-v-03891588]{width:40px;margin:0 auto}.to-bottom[data-v-03891588]{text-align:center;font-size:16px;color:#999;padding:2px 0 12px}fieldset[data-v-03891588]{border:none;padding:0;border-top:1px solid #999;text-align:center;width:300px;margin:auto}legend[data-v-03891588]{padding:0 10px;font-size:16px;color:#999}.click-tips[data-v-03891588]{width:100%;text-align:center;color:#aaa;height:20px;line-height:12px}",""])},"7c4a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar",{staticClass:"header",attrs:{flat:"",app:"",height:"48"}},[a("v-toolbar-title",{staticClass:"text-uppercase"},[a("v-layout",{attrs:{row:"",nowrap:""}},[a("v-flex",{attrs:{shrink:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("div",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"touch",rawName:"v-touch:tap.prevent.stop",value:t.goBack,expression:"goBack",arg:"tap",modifiers:{prevent:!0,stop:!0}}],staticClass:"back-btn-wrapper pa-2 clickable"},[a("span",{staticClass:"icon iconfont icon-fanhui",staticStyle:{"font-size":"24px"}})])]),a("v-flex",{staticClass:"app-both-center subheading header-title"},[a("span",[t._v(t._s(t.title))])])],1)],1),a("v-flex",{attrs:{grow:""}},[t._t("center")],2),a("v-flex",{attrs:{shrink:""}},[t._t("actions")],2)],1)],1)],1)},s=[],n=a("2b0e"),o=n["a"].extend({props:{title:{type:String},showBack:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0}},methods:{goBack:function(){this.$emit("back")}}}),r=o,c=(a("8f47"),a("0c7c")),l=a("6544"),p=a.n(l),d=a("0e8f"),h=a("a722"),u=a("71d9"),f=a("2a7f"),v=a("269a"),g=a.n(v),m=a("3ccf"),b=Object(c["a"])(r,i,s,!1,null,"e08f7ade",null);e["a"]=b.exports;p()(b,{VFlex:d["a"],VLayout:h["a"],VToolbar:u["a"],VToolbarTitle:f["b"]}),g()(b,{Ripple:m["a"]})},"8b97":function(t,e,a){var i=a("d3f4"),s=a("cb7c"),n=function(t,e){if(s(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,a){return n(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:n}},"8f47":function(t,e,a){"use strict";var i=a("0024"),s=a.n(i);s.a},9093:function(t,e,a){var i=a("ce10"),s=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},aa77:function(t,e,a){var i=a("5ca1"),s=a("be13"),n=a("79e5"),o=a("fdef"),r="["+o+"]",c="​",l=RegExp("^"+r+r+"*"),p=RegExp(r+r+"*$"),d=function(t,e,a){var s={},r=n(function(){return!!o[t]()||c[t]()!=c}),l=s[t]=r?e(h):o[t];a&&(s[a]=l),i(i.P+i.F*r,"String",s)},h=d.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(p,"")),t};t.exports=d},b331:function(t,e,a){e=t.exports=a("24fb")(!1),e.push([t.i,".v-toolbar .v-toolbar__content[data-v-e08f7ade]{padding-left:0!important;padding-right:0!important}.v-toolbar__title[data-v-e08f7ade]{width:100%}.header[data-v-e08f7ade]{z-index:20;background-color:#ededed}.app-both-center span[data-v-e08f7ade]{display:block;max-width:200px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}",""])},c5f6:function(t,e,a){"use strict";var i=a("7726"),s=a("69a8"),n=a("2d95"),o=a("5dbc"),r=a("6a99"),c=a("79e5"),l=a("9093").f,p=a("11e9").f,d=a("86cc").f,h=a("aa77").trim,u="Number",f=i[u],v=f,g=f.prototype,m=n(a("2aeb")(g))==u,b="trim"in String.prototype,x=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():h(e,3);var a,i,s,n=e.charCodeAt(0);if(43===n||45===n){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+e}for(var o,c=e.slice(2),l=0,p=c.length;l<p;l++)if(o=c.charCodeAt(l),o<48||o>s)return NaN;return parseInt(c,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof f&&(m?c(function(){g.valueOf.call(a)}):n(a)!=u)?o(new v(x(e)),a,f):x(e)};for(var w,k=a("9e1e")?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;k.length>C;C++)s(v,w=k[C])&&!s(f,w)&&d(f,w,p(v,w));f.prototype=g,g.constructor=f,a("2aba")(i,u,f)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
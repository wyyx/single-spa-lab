(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["publish-task-detail"],{"0024":function(t,e,i){var a=i("b331");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("44269bc8",a,!0,{sourceMap:!1,shadowMode:!1})},3123:function(t,e,i){"use strict";i.d(e,"c",function(){return a}),i.d(e,"b",function(){return s}),i.d(e,"a",function(){return n});var a="task/",s="taskDetail",n="allTeachers"},"34e6":function(t,e,i){t.exports=i.p+"img/no_data01.9ca6019c.png"},"69a4":function(t,e,i){"use strict";i.d(e,"a",function(){return n});var a=i("cfdf"),s=function(){function t(){this.baseUrl="",this.httpConfigService=a["a"]}var e=t.prototype;return e.getTaskTemplate=function(){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-template/select-release-list")},e.taskPublish=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task/insert",t)},e.getClassStudent=function(){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/class/select-class-by-teacher-id")},e.getGradeClass=function(){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/class/select-grade-by-school-id")},e.getClassIdAllStudent=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/student/list-by-class-id",{classId:t})},e.getPublishTaskDetail=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task/select-page-by-deploy-user-id",t)},e.getTaskJoinDetail=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-msg/user-task-page-list",t)},e.getPunchTaskList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/select-by-task-msg-id",{taskMsgId:t})},e.getPunchTaskDetailList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-msg/select-page-by-task-id",t)},e.taskSubmit=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/insert",t)},e.punchTaskSubmit=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/update",t)},e.getDailyTaskDetailsList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/select-page-by-task-id",t)},e.pushClickLike=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-like/update",{id:t})},e.getPersonalTaskDetail=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-finish-detail/select-by-id",{id:t})},e.getTaskCommentList=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-comment/list",t)},e.AddComment=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-comment/add",t)},e.ReplyComment=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"/wx/task-comment-reply/add",t)},e.getVideoToken=function(){return this.httpConfigService.httpSercvice.get(this.baseUrl+"/wx/qiniu/auth")},e.getTaskInfo=function(t){return this.httpConfigService.httpSercvice.post(this.baseUrl+"wx/task-msg/select-by-id",{id:t})},t}(),n=new s},7447:function(t,e,i){"use strict";var a=i("77a6"),s=i.n(a);s.a},"77a6":function(t,e,i){var a=i("be02");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("5aa366d9",a,!0,{sourceMap:!1,shadowMode:!1})},"7c4a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-toolbar",{staticClass:"header",attrs:{flat:"",app:"",height:"48"}},[i("v-toolbar-title",{staticClass:"text-uppercase"},[i("v-layout",{attrs:{row:"",nowrap:""}},[i("v-flex",{attrs:{shrink:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",[i("div",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"touch",rawName:"v-touch:tap.prevent.stop",value:t.goBack,expression:"goBack",arg:"tap",modifiers:{prevent:!0,stop:!0}}],staticClass:"back-btn-wrapper pa-2 clickable"},[i("span",{staticClass:"icon iconfont icon-fanhui",staticStyle:{"font-size":"24px"}})])]),i("v-flex",{staticClass:"app-both-center subheading header-title"},[i("span",[t._v(t._s(t.title))])])],1)],1),i("v-flex",{attrs:{grow:""}},[t._t("center")],2),i("v-flex",{attrs:{shrink:""}},[t._t("actions")],2)],1)],1)],1)},s=[],n=i("2b0e"),o=n["a"].extend({props:{title:{type:String},showBack:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0}},methods:{goBack:function(){this.$emit("back")}}}),r=o,l=(i("8f47"),i("0c7c")),c=i("6544"),d=i.n(c),p=i("0e8f"),u=i("a722"),h=i("71d9"),f=i("2a7f"),v=i("269a"),g=i.n(v),b=i("3ccf"),m=Object(l["a"])(r,a,s,!1,null,"e08f7ade",null);e["a"]=m.exports;d()(m,{VFlex:p["a"],VLayout:u["a"],VToolbar:h["a"],VToolbarTitle:f["b"]}),g()(m,{Ripple:b["a"]})},"8f47":function(t,e,i){"use strict";var a=i("0024"),s=i.n(a);s.a},b331:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,".v-toolbar .v-toolbar__content[data-v-e08f7ade]{padding-left:0!important;padding-right:0!important}.v-toolbar__title[data-v-e08f7ade]{width:100%}.header[data-v-e08f7ade]{z-index:20;background-color:#ededed}.app-both-center span[data-v-e08f7ade]{display:block;max-width:200px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}",""])},bbd1:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-body"},[a("Header",{attrs:{title:"任务中心"},on:{back:t.goBack}}),[a("v-tabs",{attrs:{"fixed-tabs":""}},[a("v-tab",{on:{click:t.showPublish}},[t._v("我发布的")]),a("v-tab",{on:{click:t.showJoin}},[t._v("我参与的")])],1)],a("div",{staticClass:"app-fill-height app-scroll-y hidden"},[a("div",{staticClass:"task-list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.publishTaskInfo.length,expression:"publishTaskInfo.length === 0"}],staticClass:"no-message"},[a("img",{attrs:{src:i("34e6"),alt:""}})]),t._l(t.publishTaskInfo,function(e,i){return a("div",{key:e.id,staticClass:"list-item"},[a("div",{staticClass:"list-item-left"},[a("p",{staticClass:"list-item-left-title",on:{click:function(i){return t.goToTaskCompleteDetail(e,!1)}}},[t._v("\n              "+t._s(e.name)+"\n            ")]),a("p",{staticClass:"list-item-left-des",on:{click:function(i){return t.goToTaskCompleteDetail(e,!1)}}},[t._v("\n              "+t._s(e.description)+"\n              "),a("span",{staticClass:"task-detail-text"},[t._v("... 详情")])]),a("p",{staticClass:"list-item-left-buttom"},[a("v-icon",[t._v("person")]),t._v("\n              "+t._s(e.deployUserName)+"   \n              "),a("v-icon",[t._v("alarm")]),t._v("\n              "+t._s(e.createTime.slice(5,16))+"\n            ")],1)]),a("div",{staticClass:"list-item-right",style:{background:t.getBgcolor(e)}},[a("p",{staticClass:"list-item-right-task-type"},[t._v("\n              "+t._s(e.taskTemplateName)+"\n            ")]),a("p",{staticClass:"list-item-right-task-time"},[t._v(t._s(t.getCountdown(i)))]),a("div",{staticClass:"list-item-right-task-btn",on:{click:function(i){return t.goToTaskCompleteDetail(e,!1,i)}}},[t._v("\n              "+t._s("00:00:00"===t.getCountdown(i)?"已结束":"进行中")+"\n            ")])])])})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShow,expression:"!isShow"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.taskJoinInfo.length,expression:"taskJoinInfo.length === 0"}],staticClass:"no-message"},[a("img",{attrs:{src:i("34e6"),alt:""}})]),t._l(t.taskJoinInfo,function(e,i){return a("div",{key:e.taskMsgId,staticClass:"list-item"},[a("div",{staticClass:"list-item-left"},[a("p",{staticClass:"list-item-left-title",on:{click:function(i){return t.goToTaskCompleteDetail(e,!0)}}},[t._v("\n              "+t._s(e.name)+"\n            ")]),a("p",{staticClass:"list-item-left-des",on:{click:function(i){return t.goToTaskCompleteDetail(e,!0)}}},[t._v("\n              "+t._s(e.description)+"\n              "),a("span",{staticClass:"task-detail-text"},[t._v("... 详情")])]),a("p",{staticClass:"list-item-left-buttom"},[a("v-icon",[t._v("person")]),t._v("\n              "+t._s(e.deployUserName)+"   \n              "),a("v-icon",[t._v("alarm")]),t._v("\n              "+t._s(e.createTime.slice(5,16))+"\n            ")],1)]),a("div",{staticClass:"list-item-right",style:{background:t.getBgcolor(e)}},[a("p",{staticClass:"list-item-right-task-type"},[t._v("\n              "+t._s(e.taskTemplateName)+"\n            ")]),a("p",{staticClass:"list-item-right-task-time"},[t._v("\n              "+t._s(t.getCountdown2(i))+"\n            ")]),a("div",{staticClass:"list-item-right-task-btn",on:{click:function(i){return t.goToTaskSubmit(e)}}},[t._v("\n              "+t._s(t.getState(e.isOver,e.state))+"\n            ")])])])})],2)])])],2)},s=[],n=(i("a481"),i("ac6a"),i("2b0e")),o=i("69a4"),r=i("7c4a"),l=i("7ffd"),c=i("3123"),d=i("80b8"),p=n["a"].extend({data:function(){return{publishTaskInfo:[],intervalId:0,countdownList:[],isShow:!0,taskJoinInfo:[],intervalId2:0,countdownList2:[]}},created:function(){var t=this;document.title="任务活动中心",o["a"].getPublishTaskDetail({pageNo:1,pageSize:1e3}).then(function(e){console.log("TCL: res",e),void 0===e.data.content&&(e.data.content=[]),t.publishTaskInfo=e.data.content;var i=[];e.data.content.forEach(function(t){i.push({id:t.id,endDate:t.endDate,remainTime:0,output:""})}),t.countdownList=i,t.$data.intervalId=setInterval(function(){t.$data.countdownList.forEach(function(t){var e=new Date(Date.parse(t.endDate.replace(/-/g,"/"))),i=new Date,a=e.getTime()-i.getTime()+864e5,s=0,n=0,o=0;if(a>=0){s=Math.floor(a/1e3/60/60),n=Math.floor(a/1e3/60%60),o=Math.floor(a/1e3%60),n<10&&(n="0"+n),s<10&&(s="0"+s),o<10&&(o="0"+o);var r=s+":"+n+":"+o;t.output=r}else t.output="00:00:00"})},1e3)}),o["a"].getTaskJoinDetail({pageNo:1,pageSize:100}).then(function(e){console.log("TCL: res",e),void 0===e.data.content&&(e.data.content=[]),t.taskJoinInfo=e.data.content;var i=[];e.data.content.forEach(function(t){i.push({id:t.id,endDate:t.endDate,remainTime:0,output:""})}),t.countdownList2=i,t.$data.intervalId2=setInterval(function(){t.$data.countdownList2.forEach(function(t){var e=new Date(Date.parse(t.endDate.replace(/-/g,"/"))),i=new Date,a=e.getTime()-i.getTime()+864e5,s=0,n=0,o=0;if(a>=0){s=Math.floor(a/1e3/60/60),n=Math.floor(a/1e3/60%60),o=Math.floor(a/1e3%60),n<10&&(n="0"+n),s<10&&(s="0"+s),o<10&&(o="0"+o);var r=s+":"+n+":"+o;t.output=r}else t.output="00:00:00"})},1e3)})},components:{Header:r["a"]},computed:Object.assign({},Object(l["b"])(c["c"],{taskDetail:c["b"]})),mounted:function(){},methods:{goBack:function(){"500"===localStorage.getItem("targetRoleCode")?this.$router.push("workbench/teacher"):this.$router.push("workbench/school-run")},toReceiveTask:function(){},getCountdown:function(t){return this.$data.countdownList[t].output},getCountdown2:function(t){return this.$data.countdownList2[t].output},showPublish:function(){this.isShow=!0},showJoin:function(){this.isShow=!1},getState:function(t,e){return 1===t?"已结束":1===e?"已完成":"去完成"},getBgcolor:function(t){if("教师节活动"===t.taskTemplateName)return"#F26F94";switch(this.getState(t.isOver,t.state)){case"已完成":return"#33CC99";case"去完成":return"#0AB6F3";case"已结束":return"#BCBCBC"}},goToTaskSubmit:function(t){0===t.isOver&&0===t.state&&(d["a"].store.set(c["c"]+c["b"],t),this.$router.push({name:t.submitPage}))},goToTaskCompleteDetail:function(t,e,i){d["a"].store.set(c["c"]+c["b"],t),i&&1===t.isOver||(t.taskTemplateName,this.$router.push({name:t.detailPage,query:{state:e}}))}},destroyed:function(){clearInterval(this.$data.intervalId),clearInterval(this.$data.intervalId2)}}),u=p,h=(i("7447"),i("0c7c")),f=i("6544"),v=i.n(f),g=i("132d"),b=i("71a3"),m=i("fe57"),k=Object(h["a"])(u,a,s,!1,null,"5d18b5e3",null);e["default"]=k.exports;v()(k,{VIcon:g["a"],VTab:b["a"],VTabs:m["a"]})},be02:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,".page-body[data-v-5d18b5e3]{height:100%;display:flex;flex-direction:column;background:#fff}p[data-v-5d18b5e3]{margin:0;padding:0}.task-list[data-v-5d18b5e3]{flex:1;overflow:hidden}.list-item[data-v-5d18b5e3]{display:flex;height:140px;padding:10px 6px;background:#fff;border-radius:6px;margin:8px 6px;border:1px solid #eee}.list-item-left[data-v-5d18b5e3]{flex:1;padding:0 14px}.list-item-left-title[data-v-5d18b5e3]{line-height:40px;font-size:16px;color:#000}.list-item-left-des[data-v-5d18b5e3],.list-item-left-title[data-v-5d18b5e3]{height:40px;overflow:hidden;word-break:break-all}.list-item-left-des[data-v-5d18b5e3]{line-height:20px;font-size:12px;color:#999;margin-bottom:16px;position:relative}.list-item-left-des .task-detail-text[data-v-5d18b5e3]{position:absolute;right:4px;bottom:0;padding-left:8px;background:#fff;z-index:5;color:#000}.list-item-left-des .task-detail-text[data-v-5d18b5e3]:hover{color:#0ab6f3}.list-item-left-buttom[data-v-5d18b5e3]{font-size:12px;color:#aaa;line-height:20px}.list-item-right[data-v-5d18b5e3]{width:120px;border-radius:4px;padding:10px}.list-item-right-task-type[data-v-5d18b5e3]{font-size:16px;text-align:center;color:#fff}.list-item-right-task-time[data-v-5d18b5e3]{height:18px;margin:10px auto;width:80px;border-radius:2px}.list-item-right-task-btn[data-v-5d18b5e3],.list-item-right-task-time[data-v-5d18b5e3]{background:hsla(0,0%,100%,.2);text-align:center;color:#fff}.list-item-right-task-btn[data-v-5d18b5e3]{height:36px;line-height:36px;border-radius:4px}.list-item .material-icons[data-v-5d18b5e3]{font-size:16px}.list-item .theme--light.v-icon[data-v-5d18b5e3]{color:#aaa}.no-message[data-v-5d18b5e3]{margin:50px auto;width:256px}.switch-bar[data-v-5d18b5e3]{position:relative;z-index:10}.hidden[data-v-5d18b5e3]{overflow:hidden}",""])},bfc5:function(t,e,i){"use strict";var a=i("6a18"),s=i("58df");e["a"]=Object(s["a"])(a["a"]).extend({name:"theme-provider",props:{root:Boolean},computed:{isDark:function(){return this.root?this.rootIsDark:a["a"].options.computed.isDark.call(this)}},render:function(){return this.$slots.default&&this.$slots.default.find(function(t){return!t.isComment&&" "!==t.text})}})}}]);